(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();const W=["the","of","and","to","in","is","you","that","it","he","was","for","on","are","as","with","his","they","I","at","be","this","have","from","or","one","had","by","word","but","not","what","all","were","we","when","your","can","said","there","use","an","each","which","she","do","how","their","if","will","up","other","about","out","many","then","them","these","so","some","her","would"];function j(e,o){const i=Math.floor(Math.random()*(o-e+1))+e,c=[];for(let t=0;t<i;t++){const n=W[Math.floor(Math.random()*W.length)];c.push(n)}return c.join(" ")}const N=document.getElementById("chunkDisplay"),B=document.getElementById("wpm"),I=document.getElementById("accuracy"),O=document.getElementById("consistency"),A=document.getElementById("streakDisplay"),u=document.getElementById("inputField"),k=document.querySelector(".app");let $=0,h="",d="",q=0,v=!1,r=[];const a=document.createElement("div");a.id="performanceContainer";a.style.display="none";const F=document.createElement("h2");F.textContent="Performance Summary";const S=document.createElement("div");S.id="avgWpmDisplay";const x=document.createElement("div");x.id="durationDisplay";x.style.margin="0.5rem 0";x.style.fontSize="1.2rem";x.style.color="#aaa";const R=document.createElement("h3");R.textContent="WPM Over Time";const C=document.createElement("div");C.id="chartContainer";C.style.position="relative";const D="http://www.w3.org/2000/svg",l=document.createElementNS(D,"svg");l.setAttribute("width","100%");l.setAttribute("height","100%");l.style.display="block";l.style.height="200px";const E=document.createElement("div");E.textContent="Time (seconds)";E.style.textAlign="center";E.style.marginTop="6px";E.style.color="#ccc";const f=document.createElement("div");f.textContent="Words Per Minute";f.style.position="absolute";f.style.left="-36px";f.style.top="80px";f.style.transform="rotate(-90deg)";f.style.transformOrigin="left center";f.style.color="#ccc";f.style.fontSize="0.85rem";C.appendChild(l);C.appendChild(f);const T=document.createElement("button");T.textContent="Restart Test";T.addEventListener("click",()=>{a.style.display="none",k.style.display="block",L()});a.appendChild(F);a.appendChild(S);a.appendChild(x);a.appendChild(R);a.appendChild(C);a.appendChild(E);a.appendChild(T);document.body.appendChild(a);function K(){return j(25,35)}function z(){N.innerHTML="";for(let e=0;e<h.length;e++){const o=document.createElement("span");o.textContent=h[e],e<d.length?o.className=d[e]===h[e]?"correct":"incorrect":o.className="ghost",N.appendChild(o)}}function Y(){const e=document.createElement("div");e.className="confetti-container";for(let o=0;o<80;o++){const i=document.createElement("div");i.className="confetti",i.style.left=Math.random()*100+"%",i.style.background=`hsl(${Math.random()*360}, 100%, 60%)`,i.style.animationDelay=Math.random()*.5+"s",e.appendChild(i)}document.body.appendChild(e),setTimeout(()=>e.remove(),1800)}function G(){const e=Date.now()-q,o=Q(h,d),i=Math.round(o/h.length*100),c=h.split(" ").length,t=e/6e4,n=Math.round(c/t);B.textContent=`WPM: ${n}`,I.textContent=`Accuracy: ${i}%`,v||r.push({time:e,wpm:n});const s=r.length?Math.round(r.reduce((y,b)=>y+b.wpm,0)/r.length):0,m=J(r.map(y=>y.wpm)),p=Math.max(0,Math.round((1-m/(s||1))*100));O.textContent=`Consistency: ${p}%`}u.addEventListener("input",()=>{v||(d=u.value,d.length>h.length&&(d=d.slice(0,h.length),u.value=d),z(),G(),d.length===h.length&&(v=!0,u.classList.add("finished"),d===h?($++,A.textContent=`Streak: ${$}`,Y()):($=0,A.textContent="Streak: 0"),setTimeout(()=>H(),500)))});u.addEventListener("keydown",e=>{v&&e.key==="Enter"&&(a.style.display==="block"?(a.style.display="none",k.style.display="block",L()):H())});function H(){k.style.display="none",a.style.display="block",u.blur(),u.disabled=!0;const e=r.length?Math.round(r.reduce((p,y)=>p+y.wpm,0)/r.length):0;S.textContent=`Average WPM: ${e}`;const o=(r[r.length-1].time/1e3).toFixed(3);for(x.textContent=`Test Duration: ${o} second${parseFloat(o)!==1?"s":""}`;l.firstChild;)l.removeChild(l.firstChild);const i=Math.max(...r.map(p=>p.wpm)),c=C.clientWidth||600,t=200;l.setAttribute("width",`${c}`),l.setAttribute("height",`${t}`),l.setAttribute("viewBox",`0 0 ${c} ${t}`);const n=c/r.length,s=document.createElement("div");s.id="wpmTooltip",s.style.position="absolute",s.style.background="#222",s.style.color="#0ff",s.style.padding="0.3rem 0.6rem",s.style.borderRadius="5px",s.style.fontSize="0.9rem",s.style.display="none",s.style.pointerEvents="none",C.appendChild(s);let m=null;r.forEach((p,y)=>{const b=p.wpm/i*t,w=y*n,M=t-b,g=document.createElementNS(D,"rect");g.setAttribute("x",`${w}`),g.setAttribute("y",`${M}`),g.setAttribute("width",`${n-2}`),g.setAttribute("height",`${b}`),g.setAttribute("fill","#0ff"),l.appendChild(g)}),l.addEventListener("click",p=>{const y=l.getBoundingClientRect(),b=p.clientX-y.left,w=Math.floor(b/c*r.length),M=w*n,g=r[w].wpm/i*t,P=t-g;m&&l.removeChild(m),m=document.createElementNS(D,"circle"),m.setAttribute("cx",`${M+n/2}`),m.setAttribute("cy",`${P}`),m.setAttribute("r","6"),m.setAttribute("fill","#f00"),l.appendChild(m);const X=(r[w].time/1e3).toFixed(3);s.style.left=`${M+n/2}px`,s.style.top=`${P-30}px`,s.textContent=`WPM: ${r[w].wpm}, Time: ${X}s`,s.style.display="block"})}function L(){h=K(),d="",v=!1,r=[],q=Date.now(),u.value="",u.classList.remove("finished"),u.disabled=!1,u.focus(),z(),B.textContent="WPM: 0",I.textContent="Accuracy: 100%",O.textContent="Consistency: 100%",A.textContent=`Streak: ${$}`}function J(e){if(e.length===0)return 0;const o=e.reduce((t,n)=>t+n,0)/e.length,c=e.map(t=>Math.pow(t-o,2)).reduce((t,n)=>t+n,0)/e.length;return Math.sqrt(c)}function Q(e,o){let i=0;const c=Math.min(e.length,o.length);for(let t=0;t<c;t++)e[t]===o[t]&&i++;return i}L();
